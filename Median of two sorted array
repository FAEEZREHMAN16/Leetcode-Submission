#include <limits.h>

double findMedianSortedArrays(int* A, int m, int* B, int n){
    if(m > n) return findMedianSortedArrays(B, n, A, m);
    int lo = 0, hi = m, half = (m + n + 1)/2;
    while(lo <= hi){
        int i = (lo + hi)/2;
        int j = half - i;
        int Aleft = (i==0) ? INT_MIN : A[i-1];
        int Aright = (i==m) ? INT_MAX : A[i];
        int Bleft = (j==0) ? INT_MIN : B[j-1];
        int Bright = (j==n) ? INT_MAX : B[j];
        if(Aleft <= Bright && Bleft <= Aright){
            if((m+n) % 2) return (double) (Aleft > Bleft ? Aleft : Bleft);
            int leftMax = Aleft > Bleft ? Aleft : Bleft;
            int rightMin = Aright < Bright ? Aright : Bright;
            return ((double)leftMax + rightMin) / 2.0;
        } else if(Aleft > Bright) hi = i - 1;
        else lo = i + 1;
    }
    return 0.0;
}
